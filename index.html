<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Dane pogodowe</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>
    <script>
        // Konfiguracja Firebase
        <!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dane pogodowe</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        table { width: 50%; margin: auto; border-collapse: collapse; }
        th, td { border: 1px solid black; padding: 10px; }
    </style>
</head>
<body>
    <h1>Dane pogodowe</h1>
    <table>
        <tr>
            <th>ESP</th>
            <th>Temperatura (°C)</th>
            <th>Ciśnienie (hPa)</th>
        </tr>
        <tr>
            <td>ESP1</td>
            <td id="temp">Ładowanie...</td>
            <td id="pressure">Ładowanie...</td>
        </tr>
    </table>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDKUFPWpKPn2myQQQfRvysibTdJuolZf5g",
            authDomain: "baza-dla-esp.firebaseapp.com",
            databaseURL: "https://baza-dla-esp-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "baza-dla-esp",
            storageBucket: "baza-dla-esp.firebasestorage.app",
        
        };

        // Inicjalizacja Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // Pobieranie danych dla 3 ESP
        function updateData(deviceId, elementId) {
            db.ref(deviceId).on("value", (snapshot) => {
                const data = snapshot.val();
                document.getElementById(elementId).innerHTML = `
                    <h3>${deviceId}</h3>
                    <p>Temperatura: ${data.temperature}°C</p>
                    <p>Ciśnienie: ${data.pressure} hPa</p>
                `;
            });
        }

        // Pobieranie danych dla wszystkich ESP
        window.onload = function () {
            updateData("ESP1", "esp1");
            updateData("ESP2", "esp2");
            updateData("ESP3", "esp3");
        };
    </script>
</head>
<body>
    <h1>Dane pogodowe z ESP32</h1>
    <div id="esp1"></div>
    <div id="esp2"></div>
    <div id="esp3"></div>
</body>
</html>
